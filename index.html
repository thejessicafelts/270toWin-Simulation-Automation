<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Election Simulation Automation</title>
    <link rel="stylesheet" href="./main.css">
</head>
<body>
    <section id="banner">
        <div class="banner-inner">
            <span class="left"><a href="https://thejessicafelts.github.io" target="_blank">Jessica Felts &mdash; GitHub Projects</a></span>
            <span class="right">
                <a href="https://www.github.com/thejessicafelts/270towin-simulation-automation" target="_blank">Project Repository</a>
                <a href="https://www.github.com/thejessicafelts" target="_blank">GitHub Profile</a>
            </span>
        </div>
    </section>
    <header>
        <div class="header-inner">
            <h1>270 to Win Simulation Results</h1>
        </div>
    </header>
    
    <!-- Tab Navigation -->
    <div class="tab-container">
        <button class="tab-button active" data-tab="about-tab">About This Project</button>
        <button class="tab-button" data-tab="results-tab">Simulation Results</button>
        <button class="tab-button" data-tab="code-tab">Script Code</button>
    </div>

    <!-- Tab Content -->
    <main>
        <!-- About This Project Tab -->
        <section id="about-tab" class="tab-content active">
            <section id="readme">
                <h1>270toWin Election Simulation Automation</h1>
                <p>This Python script automates running simulations on the <a href="https://www.270towin.com/2024-simulation/" target="_blank">270toWin 2024 Election Simulation</a> website. It sets the simulation speed, runs the simulation a specified number of times, and tracks the results for each run. Throughout the process, it prints out information on which candidate won each simulation.</p>
            
                <h2>Features</h2>
                <ul>
                    <li>Automatically set the simulation speed on the 270toWin website.</li>
                    <li>Run the simulation a specified number of times.</li>
                    <li>Track how many times each candidate wins or ties during the simulation.</li>
                    <li>Print results for each simulation run, including which candidate won and the running percentage of wins.</li>
                </ul>
            
                <h2>Prerequisites</h2>
                <p>Before running the script, make sure you have the following installed:</p>
                <ul>
                    <li><strong>Python 3.7 or higher</strong>: Download from <a href="https://www.python.org/downloads/" target="_blank">python.org</a>.</li>
                    <li><strong>Google Chrome</strong>: The script uses the Chrome browser to run the automation.</li>
                    <li><strong>ChromeDriver</strong>: Managed automatically by <code>webdriver-manager</code>.</li>
                    <li><strong>Selenium</strong>: To install Selenium, run:</li>
                </ul>
                <div class="code-block">
                    <div class="code-header">
                        <span class="code-language">Terminal</span>
                        <button class="copy-button">Copy</button>
                    </div>
                        <pre><code class="script-code">pip install selenium webdriver-manager</code></pre>
                        </div>
            
                <h2>Setup Instructions</h2>
            
                <h3>Step 1: Clone the Repository</h3>
                <p>To download this script, clone the repository using:</p>
                <div class="code-block">
                    <div class="code-header">
                        <span class="code-language">Terminal</span>
                        <button class="copy-button">Copy</button>
                    </div>
                        <pre><code class="script-code">git clone https://github.com/thejessicafelts/270towin-simulation-automation.git</code></pre>
                </div>
                <p>Then navigate into the new project folder:</p>
                <div class="code-block">
                    <div class="code-header">
                        <span class="code-language">Terminal</span>
                        <button class="copy-button">Copy</button>
                    </div>
                        <pre><code class="script-code">cd 270towin-simulation-automation</code></pre>
                </div>
            
                <h3>Step 2: Install Required Packages</h3>
                <p>Make sure you have <code>selenium</code> and <code>webdriver-manager</code> installed:</p>
                <div class="code-block">
                    <div class="code-header">
                        <span class="code-language">Terminal</span>
                        <button class="copy-button">Copy</button>
                    </div>
                        <pre><code class="script-code">pip install selenium webdriver-manager</code></pre>
                        </div>
            
                <h3>Step 3: Preventing Your Computer from Sleeping During the Simulation</h3>
                <p><strong>For Mac Users</strong>: Use the <code>caffeinate</code> command to prevent your Mac from going to sleep while the script runs:</p>
                <div class="code-block">
                    <div class="code-header">
                        <span class="code-language">Terminal</span>
                        <button class="copy-button">Copy</button>
                    </div>
                        <pre><code class="script-code">caffeinate -i python3 script_name.py</code></pre>
                        </div>
                <p>Replace <code>script_name.py</code> with the actual name of your Python script. The <code>-i</code> option ensures your Mac stays awake as long as the script is running.</p>
                <p><strong>For Windows Users</strong>: Adjust your power settings to prevent the computer from sleeping:</p>
                <ol>
                    <li>Go to <strong>Settings &gt; System &gt; Power &amp; Sleep</strong>.</li>
                    <li>Under <strong>Sleep</strong>, set <strong>"When plugged in, PC goes to sleep after"</strong> to <strong>"Never."</strong></li>
                </ol>
            
                <h2>Running the Script</h2>
            
                <h3>Step 1: Modify Configuration (Optional)</h3>
                <p>Edit the following variables in the script if you need to adjust the settings:</p>
                <ul>
                    <li><strong><code>url</code></strong>: The URL of the 270toWin simulation page (default is set correctly).</li>
                    <li><strong><code>sim_speed_id</code></strong>: The ID for the simulation speed button (default: <code>sim_speed_4</code>).</li>
                    <li><strong><code>simulation_count</code></strong>: Number of times to run the simulation (default: <code>1000</code>).</li>
                    <li><strong><code>wait_time</code></strong>: Time to wait (in seconds) between simulations (default: <code>6</code>).</li>
                </ul>
            
                <h3>Step 2: Run the Script</h3>
                <p>Execute the script using:</p>
                <p><strong>Mac</strong>:</p>
                <div class="code-block">
                    <div class="code-header">
                        <span class="code-language">Terminal</span>
                        <button class="copy-button">Copy</button>
                    </div>
                        <pre><code class="script-code">caffeinate -i python3 script_name.py</code></pre>
                        </div>
                <p><strong>Windows</strong>:</p>
                <div class="code-block">
                    <div class="code-header">
                        <span class="code-language">Terminal</span>
                        <button class="copy-button">Copy</button>
                    </div>
                        <pre><code class="script-code">Python script_name.py</code></pre>
                        </div>
            
                <h3>Example Output:</h3>
                <pre class="output-example"><code class="">--------------------------------------------------------------------------------
Simulation 1: Harris Wins.
----------
Harris: 320, Trump: 218
Harris has won 100.00% of simulations. (1 out of 1)
--------------------------------------------------------------------------------
Simulation 2: Trump Wins.
----------
Harris: 249, Trump: 289
Trump has won 50.00% of simulations. (1 out of 2)
--------------------------------------------------------------------------------
Simulation 3: Harris and Trump have Tied.
----------
Harris: 269, Trump: 269
50.00% of Simulations (1 of 3) have resulted in a Tie.
--------------------------------------------------------------------------------</code></pre>
    
                <h2>Code Walkthrough</h2>
                <ol>
                    <li><strong>Initialization</strong>: The script sets up the WebDriver using ChromeDriver and <code>webdriver-manager</code>. The simulation speed is set by finding and clicking the appropriate button on the website.</li>
                    <li><strong>Simulation Loop</strong>: The script runs the simulation the specified number of times. After each simulation run, it waits for the results to appear and retrieves them using the designated HTML element IDs.</li>
                    <li><strong>Result Calculation &amp; Display</strong>: The script calculates and prints the win percentage for Harris and Trump, as well as the number of ties, after each simulation run.</li>
                </ol>
            
                <h2>Future Enhancements</h2>
                <ul>
                    <li><strong>Final Summary</strong>: Add a final summary that prints the overall win percentages for Harris, Trump, and ties at the end of all simulations.</li>
                    <li><strong>Robust Error Handling</strong>: Implement more error handling to gracefully handle issues, such as network interruptions or missing elements on the page.</li>
                    <li><strong>Command-Line Arguments</strong>: Allow users to specify <code>simulation_count</code>, <code>wait_time</code>, and other configurations via command-line arguments for easier usage.</li>
                </ul>
            
                <h2>Troubleshooting</h2>
                <ul>
                    <li><strong>ChromeDriver Issues</strong>: Ensure that your Chrome browser is up to date. <code>webdriver-manager</code> should handle most ChromeDriver version issues, but sometimes mismatches can occur. Updating Chrome typically resolves these.</li>
                    <li><strong>Permissions Errors</strong>: If you encounter permissions issues when running the script on Windows, try running the command prompt as an Administrator.</li>
                    <li><strong>System Goes to Sleep</strong>: Make sure to use the <code>caffeinate</code> command on Mac or adjust the power settings on Windows as described above.</li>
                </ul>
            
                <h2>Contributing</h2>
                <p>Feel free to submit issues or pull requests if you'd like to contribute to improving the script. Make sure to follow proper coding standards and provide thorough explanations for any changes made.</p>
            </section>
        </section>

        <!-- Simulation Results Tab -->
        <section id="results-tab" class="tab-content">
            <p class="tab-description">This table displays results from Jessica's personal use of this simulation automation script.</p>
            <table class="">
                <thead>
                    <tr class="top-row">
                        <th class="none" colspan="2"></th>
                        <th class="center harris-heading" colspan="2">Kamala Harris</th>
                        <th class="center trump-heading" colspan="2">Donald Trump</th>
                        <th class="center tie-heading" colspan="2">Ties</th>
                    </tr>
                    <tr class="bottom-row">
                        <th id="col-date" class="left">Date</th>
                        <th id="col-simulations" class="center">Simulations</th>
                        <th id="col-dem-wins" class="harris-heading center">Wins</th>
                        <th id="col-dem-percent" class="harris-heading center">%</th>
                        <th id="col-rep-wins" class="trump-heading center">Wins</th>
                        <th id="col-rep-percent" class="trump-heading center">%</th>
                        <th id="col-tie-totals" class="tie-heading center">Ties</th>
                        <th id="col-tie-percent" class="tie-heading center">%</th>
                    </tr>
                </thead>
                <tbody id="simulation-results">

            <tr class="rep-win">
                <td class="left">October 29, 2024 &mdash; 18:45 EDT</td>
                <td class="center">10</td>
                <td class="center ">0</td>
                <td class="center ">0.0%</td>
                <td class="center rep-win">1</td>
                <td class="center rep-win">100.0%</td>
                <td class="center ">0</td>
                <td class="center ">0.0%</td>
            </tr>
            
    <tr>
        <td class="left">October 29, 2024 &mdash; 18:42 EDT</td>
        <td class="center">10</td>
        <td class="center">3</td>
        <td class="center">30.0%</td>
        <td class="center">7</td>
        <td class="center">70.0%</td>
        <td class="center">0</td>
        <td class="center">0.0%</td>
    </tr>

                <tr class="rep-win">
                    <td class="left">October 29, 2024 &mdash; 17:42 EDT</td>
                    <td class="center">100</td>
                    <td class="center ">47</td>
                    <td class="center ">47.0%</td>
                    <td class="center rep-win">53</td>
                    <td class="center rep-win">53.0%</td>
                    <td class="center ">0</td>
                    <td class="center ">0.0%</td>
                </tr>
                
                <tr class="rep-win">
                    <td class="left">October 29, 2024 &mdash; 17:27 EDT</td>
                    <td class="center">50</td>
                    <td class="center ">20</td>
                    <td class="center ">40.0%</td>
                    <td class="center rep-win">30</td>
                    <td class="center rep-win">60.0%</td>
                    <td class="center ">0</td>
                    <td class="center ">0.0%</td>
                </tr>
                
                <tr class="rep-win">
                    <td class="left">October 29, 2024 &mdash; 17:15 EDT</td>
                    <td class="center">5</td>
                    <td class="center ">1</td>
                    <td class="center ">20.0%</td>
                    <td class="center rep-win">4</td>
                    <td class="center rep-win">80.0%</td>
                    <td class="center ">0</td>
                    <td class="center ">0.0%</td>
                </tr>
                
                <tr class="dem-rep-tie">
                    <td class="left">October 29, 2024 &mdash; 17:01 EDT</td>
                    <td class="center">10</td>
                    <td class="center dem-rep-tie">5</td>
                    <td class="center dem-rep-tie">50.0%</td>
                    <td class="center dem-rep-tie">5</td>
                    <td class="center dem-rep-tie">50.0%</td>
                    <td class="center ">0</td>
                    <td class="center ">0.0%</td>
                </tr>
                
                <tr class="rep-win">
                    <td class="left">October 29, 2024 &mdash; 16:58 EDT</td>
                    <td class="center">20</td>
                    <td class="center ">9</td>
                    <td class="center ">45.0%</td>
                    <td class="center rep-win">11</td>
                    <td class="center rep-win">55.0%</td>
                    <td class="center ">0</td>
                    <td class="center ">0.0%</td>
                </tr>                    <tr class="rep-win">
                        <td class="left">October 29, 2024 &mdash; 16:53 EDT</td>
                        <td class="center">20</td>
                        <td class="center ">8</td>
                        <td class="center ">40.0%</td>
                        <td class="center rep-win">12</td>
                        <td class="center rep-win">60.0%</td>
                        <td class="center ">0</td>
                        <td class="center ">0.0%</td>
                    </tr>
                    <tr class="dem-rep-tie">
                        <td class="left">October 29, 2024 &mdash; 16:47 EDT</td>
                        <td class="center">10</td>
                        <td class="center dem-rep-tie">5</td>
                        <td class="center dem-rep-tie">50.0%</td>
                        <td class="center dem-rep-tie">5</td>
                        <td class="center dem-rep-tie">50.0%</td>
                        <td class="center ">0</td>
                        <td class="center ">0.0%</td>
                    </tr>
                    <tr class="dem-win">
                        <td class="left">October 29, 2024 &mdash; 16:41 EDT</td>
                        <td class="center">10</td>
                        <td class="center dem-win">6</td>
                        <td class="center dem-win">60.0%</td>
                        <td class="center ">4</td>
                        <td class="center ">40.0%</td>
                        <td class="center ">0</td>
                        <td class="center ">0.0%</td>
                    </tr>
                    </tr><tr class="rep-win">
                        <td class="left">October 29, 2024</td>
                        <td class="center">10</td>
                        <td class="center ">4</td>
                        <td class="center ">40.0%</td>
                        <td class="center rep-win">6</td>
                        <td class="center rep-win">60.0%</td>
                        <td class="center ">0</td>
                        <td class="center ">0.0%</td>
                    </tr>                    
                    <tr class="dem-rep-tie">
                        <td class="left">October 29, 2024</td>
                        <td class="center">10</td>
                        <td class="center dem-rep-tie">5</td>
                        <td class="center dem-rep-tie">50.0%</td>
                        <td class="center dem-rep-tie">5</td>
                        <td class="center dem-rep-tie">50.0%</td>
                        <td class="center ">0</td>
                        <td class="center ">0.0%</td>
                    </tr>
                    <tr class="dem-rep-tie">
                        <td class="left">October 29, 2024</td>
                        <td class="center">10</td>
                        <td class="center dem-rep-tie">5</td>
                        <td class="center dem-rep-tie">50.0%</td>
                        <td class="center dem-rep-tie">5</td>
                        <td class="center dem-rep-tie">50.0%</td>
                        <td class="center ">0</td>
                        <td class="center ">0.0%</td>
                    </tr>
                    <tr class="rep-win">
                        <td class="left">October 29, 2024</td>
                        <td class="center">10</td>
                        <td class="center ">3</td>
                        <td class="center ">30.0%</td>
                        <td class="center rep-win">7</td>
                        <td class="center rep-win">70.0%</td>
                        <td class="center ">0</td>
                        <td class="center ">0.0%</td>
                    </tr>
                    <tr class="dem-win">
                        <td class="left">October 24, 2024</td>
                        <td class="center">100</td>
                        <td class="center dem-win">51</td>
                        <td class="center dem-win">51.0%</td>
                        <td class="center">49</td>
                        <td class="center">49.0%</td>
                        <td class="center">0</td>
                        <td class="center">0.0%</td>
                    </tr>
                    <tr class="rep-win">
                        <td class="left">October 24, 2024</td>
                        <td class="center">100</td>
                        <td class="center">48</td>
                        <td class="center">48.0%</td>
                        <td class="center rep-win">52</td>
                        <td class="center rep-win">52.0%</td>
                        <td class="center">0</td>
                        <td class="center">0.0%</td>
                    </tr>
                    <tr class="rep-win">
                        <td class="left">October 24, 2024</td>
                        <td class="center">100</td>
                        <td class="center">46</td>
                        <td class="center">46.0%</td>
                        <td class="center rep-win">54</td>
                        <td class="center rep-win">54.0%</td>
                        <td class="center">0</td>
                        <td class="center">0.0%</td>
                    </tr>
                    <tr class="rep-win">
                        <td class="left">October 23, 2024</td>
                        <td class="center">10</td>
                        <td class="center">4</td>
                        <td class="center">40.0%</td>
                        <td class="center rep-win">6</td>
                        <td class="center rep-win">60.0%</td>
                        <td class="center">0</td>
                        <td class="center">0.0%</td>
                    </tr>
                </tbody>
            </table>
        </section>

        <!-- Script Code Tab -->
        <section id="code-tab" class="tab-content">
            <p class="tab-description">The following script is the <code>automation.py</code> script that is used for the automation of the 270toWin simulation.</p>    
            <div class="code-block">
                <div class="code-header">
                    <span class="code-language">Python</span>
                    <button class="copy-button">Copy</button>
                </div>
                <pre><code class="script-code">from selenium import webdriver
    from selenium.webdriver.common.by import By
    from selenium.webdriver.chrome.service import Service as ChromeService
    from webdriver_manager.chrome import ChromeDriverManager
    import time

    # Configuration
    url = 'https://www.270towin.com/2024-simulation/'
    sim_speed_id = 'sim_speed_4'
    run_simulation = 'run-simulation'
    results_harris = 'dem_ev'
    results_trump = 'rep_ev'
    wins_harris = 0
    wins_trump = 0
    wins_tied = 0
    wait_time = 6
    simulation_count = 100

    # Initialize the WebDriver (Chrome)
    driver = webdriver.Chrome(service=ChromeService(ChromeDriverManager().install()))

    try:
        # Open the website
        driver.get(url)

        # Set Simluation Speed
        sim_speed_id_btn = driver.find_element(By.ID, sim_speed_id)
        sim_speed_id_btn.click()

        # Find the "Run Simluation" button
        run_simulation_btn = driver.find_element(By.ID, run_simulation)

        # Run the Simluation a specified number of times
        for i in range(simulation_count):

            # Click the "Run Simluation" Button
            run_simulation_btn.click()

            # Wait for the Simulation to Complete (for Speed 4, this is about 6 seconds)
            time.sleep(wait_time)

            # Recording the final Values
            results_harris_value = driver.find_element(By.ID, results_harris).text
            results_trump_value = driver.find_element(By.ID, results_trump).text

            # Convert Results to Numbers
            try:
                results_harris_value = int(results_harris_value.replace('',''))
                results_trump_value = int(results_trump_value.replace('',''))
            except ValueError:
                print(f"Count not convert values to numbers: '{results_harris_value}', '{results_trump_value}'")
                continue

            # Update the Win Record
            if results_harris_value > results_trump_value:
                wins_harris += 1
            elif results_harris_value < results_trump_value:
                wins_trump += 1
            else:
                wins_tied += 1

            # Calculate the Win Percentage
            total_runs = wins_harris + wins_trump + wins_tied
            wins_harris_percentage = (wins_harris / total_runs) * 100 if total_runs > 0 else 0
            wins_trump_percentage = (wins_trump / total_runs) * 100 if total_runs > 0 else 0
            wins_tied_percentage = (wins_tied / total_runs) * 100 if total_runs > 0 else 0

            # Print the Results, Update Win Record
            if results_harris_value > results_trump_value:
                print("-" * 80)
                print(f"Simluation {i + 1}: Harris Wins.")
                print("-" * 10)
                print(f"Harris: {results_harris_value}, Trump: {results_trump_value}")
                print(f"Harris has won {wins_harris_percentage:.2f}% of simulations. ({wins_harris} out of {total_runs})")
            elif results_harris_value < results_trump_value:
                print("-" * 80)
                print(f"Simluation {i + 1}: Trump Wins.")
                print("-" * 10)
                print(f"Harris: {results_harris_value}, Trump: {results_trump_value}")
                print(f"Trump has won {wins_trump_percentage:.2f}% of simulations. ({wins_trump} out of {total_runs})")
            else:
                print("-" * 80)
                print(f"Simluation {i + 1}: Harris and Trump have Tied.")
                print("-" * 10)
                print(f"Harris: {results_harris_value}, Trump: {results_trump_value}")
                print(f"{wins_trump_percentage:.2f}% of Simulations ({wins_tied} of {total_runs}) have resulted in a Tie.")

        # Keep the browser open after the script finishes
        print(f"{i + 1} Simluations have been completed.")

    except Exception as e:
        print(f"An error occurred: {e}")

    # Commented out to keep the browser open
    # finally:
    #     driver.quit()</code></pre>
        </section>
    </main>
    
    <footer>
        <div class="footer-inner">
            <p>Copyright &copy; 2024 &ndash; Jessica Felts</p>
        </div>
    </footer>

    <script src="./main.js"></script>
</body>
</html>